(* TEST
   expect;
*)

(* Non-representable [val] in signature *)
(* CR layouts: lift this restriction *)
module type S = sig
  type t : any
  val x : t
end
[%%expect{|
Line 3, characters 10-11:
3 |   val x : t
              ^
Error: The type of a module-level value must have a representable layout.
       The layout of type t is any
         because of the definition of t at line 2, characters 2-14.
       But the layout of type t must be representable
         because it's the type of something stored in a module structure.
|}]


(* Make sure generative functors produce different types *)
module type Id = sig
  type t : bits64
  val null : t
  val gen : unit -> t
  val validate : t -> bool
end

module Make_id () : Id = struct
  type t = int64#
  let null = #0L
  let gen () = #1234L
  let validate _id = true
end

module Id_1 = Make_id ()
module Id_2 = Make_id ()

let _ = Id_2.validate (Id_1.gen ())

[%%expect{|
module type Id =
  sig
    type t : bits64
    val null : t
    val gen : unit -> t
    val validate : t -> bool
  end
module Make_id : functor () -> Id
module Id_1 : Id
module Id_2 : Id
Line 18, characters 22-35:
18 | let _ = Id_2.validate (Id_1.gen ())
                           ^^^^^^^^^^^^^
Error: This expression has type "Id_1.t" but an expression was expected of type
         "Id_2.t"
|}]


module Big_module = struct
  (* Won't compile because the scannable prefix is too big *)
  let f_0 = #42.0
  let a_0 = "a"
  let a_1 = "a"
  let a_2 = "a"
  let a_3 = "a"
  let a_4 = "a"
  let a_5 = "a"
  let a_6 = "a"
  let a_7 = "a"
  let a_8 = "a"
  let a_9 = "a"
  let a_10 = "a"
  let a_11 = "a"
  let a_12 = "a"
  let a_13 = "a"
  let a_14 = "a"
  let a_15 = "a"
  let a_16 = "a"
  let a_17 = "a"
  let a_18 = "a"
  let a_19 = "a"
  let a_20 = "a"
  let a_21 = "a"
  let a_22 = "a"
  let a_23 = "a"
  let a_24 = "a"
  let a_25 = "a"
  let a_26 = "a"
  let a_27 = "a"
  let a_28 = "a"
  let a_29 = "a"
  let a_30 = "a"
  let a_31 = "a"
  let a_32 = "a"
  let a_33 = "a"
  let a_34 = "a"
  let a_35 = "a"
  let a_36 = "a"
  let a_37 = "a"
  let a_38 = "a"
  let a_39 = "a"
  let a_40 = "a"
  let a_41 = "a"
  let a_42 = "a"
  let a_43 = "a"
  let a_44 = "a"
  let a_45 = "a"
  let a_46 = "a"
  let a_47 = "a"
  let a_48 = "a"
  let a_49 = "a"
  let a_50 = "a"
  let a_51 = "a"
  let a_52 = "a"
  let a_53 = "a"
  let a_54 = "a"
  let a_55 = "a"
  let a_56 = "a"
  let a_57 = "a"
  let a_58 = "a"
  let a_59 = "a"
  let a_60 = "a"
  let a_61 = "a"
  let a_62 = "a"
  let a_63 = "a"
  let a_64 = "a"
  let a_65 = "a"
  let a_66 = "a"
  let a_67 = "a"
  let a_68 = "a"
  let a_69 = "a"
  let a_70 = "a"
  let a_71 = "a"
  let a_72 = "a"
  let a_73 = "a"
  let a_74 = "a"
  let a_75 = "a"
  let a_76 = "a"
  let a_77 = "a"
  let a_78 = "a"
  let a_79 = "a"
  let a_80 = "a"
  let a_81 = "a"
  let a_82 = "a"
  let a_83 = "a"
  let a_84 = "a"
  let a_85 = "a"
  let a_86 = "a"
  let a_87 = "a"
  let a_88 = "a"
  let a_89 = "a"
  let a_90 = "a"
  let a_91 = "a"
  let a_92 = "a"
  let a_93 = "a"
  let a_94 = "a"
  let a_95 = "a"
  let a_96 = "a"
  let a_97 = "a"
  let a_98 = "a"
  let a_99 = "a"
  let a_100 = "a"
  let a_101 = "a"
  let a_102 = "a"
  let a_103 = "a"
  let a_104 = "a"
  let a_105 = "a"
  let a_106 = "a"
  let a_107 = "a"
  let a_108 = "a"
  let a_109 = "a"
  let a_110 = "a"
  let a_111 = "a"
  let a_112 = "a"
  let a_113 = "a"
  let a_114 = "a"
  let a_115 = "a"
  let a_116 = "a"
  let a_117 = "a"
  let a_118 = "a"
  let a_119 = "a"
  let a_120 = "a"
  let a_121 = "a"
  let a_122 = "a"
  let a_123 = "a"
  let a_124 = "a"
  let a_125 = "a"
  let a_126 = "a"
  let a_127 = "a"
  let a_128 = "a"
  let a_129 = "a"
  let a_130 = "a"
  let a_131 = "a"
  let a_132 = "a"
  let a_133 = "a"
  let a_134 = "a"
  let a_135 = "a"
  let a_136 = "a"
  let a_137 = "a"
  let a_138 = "a"
  let a_139 = "a"
  let a_140 = "a"
  let a_141 = "a"
  let a_142 = "a"
  let a_143 = "a"
  let a_144 = "a"
  let a_145 = "a"
  let a_146 = "a"
  let a_147 = "a"
  let a_148 = "a"
  let a_149 = "a"
  let a_150 = "a"
  let a_151 = "a"
  let a_152 = "a"
  let a_153 = "a"
  let a_154 = "a"
  let a_155 = "a"
  let a_156 = "a"
  let a_157 = "a"
  let a_158 = "a"
  let a_159 = "a"
  let a_160 = "a"
  let a_161 = "a"
  let a_162 = "a"
  let a_163 = "a"
  let a_164 = "a"
  let a_165 = "a"
  let a_166 = "a"
  let a_167 = "a"
  let a_168 = "a"
  let a_169 = "a"
  let a_170 = "a"
  let a_171 = "a"
  let a_172 = "a"
  let a_173 = "a"
  let a_174 = "a"
  let a_175 = "a"
  let a_176 = "a"
  let a_177 = "a"
  let a_178 = "a"
  let a_179 = "a"
  let a_180 = "a"
  let a_181 = "a"
  let a_182 = "a"
  let a_183 = "a"
  let a_184 = "a"
  let a_185 = "a"
  let a_186 = "a"
  let a_187 = "a"
  let a_188 = "a"
  let a_189 = "a"
  let a_190 = "a"
  let a_191 = "a"
  let a_192 = "a"
  let a_193 = "a"
  let a_194 = "a"
  let a_195 = "a"
  let a_196 = "a"
  let a_197 = "a"
  let a_198 = "a"
  let a_199 = "a"
  let a_200 = "a"
  let a_201 = "a"
  let a_202 = "a"
  let a_203 = "a"
  let a_204 = "a"
  let a_205 = "a"
  let a_206 = "a"
  let a_207 = "a"
  let a_208 = "a"
  let a_209 = "a"
  let a_210 = "a"
  let a_211 = "a"
  let a_212 = "a"
  let a_213 = "a"
  let a_214 = "a"
  let a_215 = "a"
  let a_216 = "a"
  let a_217 = "a"
  let a_218 = "a"
  let a_219 = "a"
  let a_220 = "a"
  let a_221 = "a"
  let a_222 = "a"
  let a_223 = "a"
  let a_224 = "a"
  let a_225 = "a"
  let a_226 = "a"
  let a_227 = "a"
  let a_228 = "a"
  let a_229 = "a"
  let a_230 = "a"
  let a_231 = "a"
  let a_232 = "a"
  let a_233 = "a"
  let a_234 = "a"
  let a_235 = "a"
  let a_236 = "a"
  let a_237 = "a"
  let a_238 = "a"
  let a_239 = "a"
  let a_240 = "a"
  let a_241 = "a"
  let a_242 = "a"
  let a_243 = "a"
  let a_244 = "a"
  let a_245 = "a"
  let a_246 = "a"
  let a_247 = "a"
  let a_248 = "a"
  let a_249 = "a"
  let a_250 = "a"
  let a_251 = "a"
  let a_252 = "a"
  let a_253 = "a"
  let a_254 = "a"
  let a_255 = "a"
  let a_256 = "a"
end
[%%expect{|
Lines 1-261, characters 20-3:
  1 | ....................struct
  2 |   (* Won't compile because the scannable prefix is too big *)
  3 |   let f_0 = #42.0
  4 |   let a_0 = "a"
  5 |   let a_1 = "a"
...
258 |   let a_254 = "a"
259 |   let a_255 = "a"
260 |   let a_256 = "a"
261 | end
Error: Mixed modules may contain at most 254 value fields prior to the flat suffix, but this one contains 257.
|}]


module Big_module_with_big_coercion : sig
  (* Won't compile because the scannable prefix is too big *)
  val f_0 : float#
  val a_0 : string
  val a_1 : string
  val a_2 : string
  val a_3 : string
  val a_4 : string
  val a_5 : string
  val a_6 : string
  val a_7 : string
  val a_8 : string
  val a_9 : string
  val a_10 : string
  val a_11 : string
  val a_12 : string
  val a_13 : string
  val a_14 : string
  val a_15 : string
  val a_16 : string
  val a_17 : string
  val a_18 : string
  val a_19 : string
  val a_20 : string
  val a_21 : string
  val a_22 : string
  val a_23 : string
  val a_24 : string
  val a_25 : string
  val a_26 : string
  val a_27 : string
  val a_28 : string
  val a_29 : string
  val a_30 : string
  val a_31 : string
  val a_32 : string
  val a_33 : string
  val a_34 : string
  val a_35 : string
  val a_36 : string
  val a_37 : string
  val a_38 : string
  val a_39 : string
  val a_40 : string
  val a_41 : string
  val a_42 : string
  val a_43 : string
  val a_44 : string
  val a_45 : string
  val a_46 : string
  val a_47 : string
  val a_48 : string
  val a_49 : string
  val a_50 : string
  val a_51 : string
  val a_52 : string
  val a_53 : string
  val a_54 : string
  val a_55 : string
  val a_56 : string
  val a_57 : string
  val a_58 : string
  val a_59 : string
  val a_60 : string
  val a_61 : string
  val a_62 : string
  val a_63 : string
  val a_64 : string
  val a_65 : string
  val a_66 : string
  val a_67 : string
  val a_68 : string
  val a_69 : string
  val a_70 : string
  val a_71 : string
  val a_72 : string
  val a_73 : string
  val a_74 : string
  val a_75 : string
  val a_76 : string
  val a_77 : string
  val a_78 : string
  val a_79 : string
  val a_80 : string
  val a_81 : string
  val a_82 : string
  val a_83 : string
  val a_84 : string
  val a_85 : string
  val a_86 : string
  val a_87 : string
  val a_88 : string
  val a_89 : string
  val a_90 : string
  val a_91 : string
  val a_92 : string
  val a_93 : string
  val a_94 : string
  val a_95 : string
  val a_96 : string
  val a_97 : string
  val a_98 : string
  val a_99 : string
  val a_100 : string
  val a_101 : string
  val a_102 : string
  val a_103 : string
  val a_104 : string
  val a_105 : string
  val a_106 : string
  val a_107 : string
  val a_108 : string
  val a_109 : string
  val a_110 : string
  val a_111 : string
  val a_112 : string
  val a_113 : string
  val a_114 : string
  val a_115 : string
  val a_116 : string
  val a_117 : string
  val a_118 : string
  val a_119 : string
  val a_120 : string
  val a_121 : string
  val a_122 : string
  val a_123 : string
  val a_124 : string
  val a_125 : string
  val a_126 : string
  val a_127 : string
  val a_128 : string
  val a_129 : string
  val a_130 : string
  val a_131 : string
  val a_132 : string
  val a_133 : string
  val a_134 : string
  val a_135 : string
  val a_136 : string
  val a_137 : string
  val a_138 : string
  val a_139 : string
  val a_140 : string
  val a_141 : string
  val a_142 : string
  val a_143 : string
  val a_144 : string
  val a_145 : string
  val a_146 : string
  val a_147 : string
  val a_148 : string
  val a_149 : string
  val a_150 : string
  val a_151 : string
  val a_152 : string
  val a_153 : string
  val a_154 : string
  val a_155 : string
  val a_156 : string
  val a_157 : string
  val a_158 : string
  val a_159 : string
  val a_160 : string
  val a_161 : string
  val a_162 : string
  val a_163 : string
  val a_164 : string
  val a_165 : string
  val a_166 : string
  val a_167 : string
  val a_168 : string
  val a_169 : string
  val a_170 : string
  val a_171 : string
  val a_172 : string
  val a_173 : string
  val a_174 : string
  val a_175 : string
  val a_176 : string
  val a_177 : string
  val a_178 : string
  val a_179 : string
  val a_180 : string
  val a_181 : string
  val a_182 : string
  val a_183 : string
  val a_184 : string
  val a_185 : string
  val a_186 : string
  val a_187 : string
  val a_188 : string
  val a_189 : string
  val a_190 : string
  val a_191 : string
  val a_192 : string
  val a_193 : string
  val a_194 : string
  val a_195 : string
  val a_196 : string
  val a_197 : string
  val a_198 : string
  val a_199 : string
  val a_200 : string
  val a_201 : string
  val a_202 : string
  val a_203 : string
  val a_204 : string
  val a_205 : string
  val a_206 : string
  val a_207 : string
  val a_208 : string
  val a_209 : string
  val a_210 : string
  val a_211 : string
  val a_212 : string
  val a_213 : string
  val a_214 : string
  val a_215 : string
  val a_216 : string
  val a_217 : string
  val a_218 : string
  val a_219 : string
  val a_220 : string
  val a_221 : string
  val a_222 : string
  val a_223 : string
  val a_224 : string
  val a_225 : string
  val a_226 : string
  val a_227 : string
  val a_228 : string
  val a_229 : string
  val a_230 : string
  val a_231 : string
  val a_232 : string
  val a_233 : string
  val a_234 : string
  val a_235 : string
  val a_236 : string
  val a_237 : string
  val a_238 : string
  val a_239 : string
  val a_240 : string
  val a_241 : string
  val a_242 : string
  val a_243 : string
  val a_244 : string
  val a_245 : string
  val a_246 : string
  val a_247 : string
  val a_248 : string
  val a_249 : string
  val a_250 : string
  val a_251 : string
  val a_252 : string
  val a_253 : string
  val a_254 : string
  val a_255 : string
  val a_256 : string
  val a_257 : string
  val a_258 : string
  val a_259 : string
  val a_260 : string
end = struct
  let f_0 = #42.0
  let a_0 = "a"
  let a_1 = "a"
  let a_2 = "a"
  let a_3 = "a"
  let a_4 = "a"
  let a_5 = "a"
  let a_6 = "a"
  let a_7 = "a"
  let a_8 = "a"
  let a_9 = "a"
  let a_10 = "a"
  let a_11 = "a"
  let a_12 = "a"
  let a_13 = "a"
  let a_14 = "a"
  let a_15 = "a"
  let a_16 = "a"
  let a_17 = "a"
  let a_18 = "a"
  let a_19 = "a"
  let a_20 = "a"
  let a_21 = "a"
  let a_22 = "a"
  let a_23 = "a"
  let a_24 = "a"
  let a_25 = "a"
  let a_26 = "a"
  let a_27 = "a"
  let a_28 = "a"
  let a_29 = "a"
  let a_30 = "a"
  let a_31 = "a"
  let a_32 = "a"
  let a_33 = "a"
  let a_34 = "a"
  let a_35 = "a"
  let a_36 = "a"
  let a_37 = "a"
  let a_38 = "a"
  let a_39 = "a"
  let a_40 = "a"
  let a_41 = "a"
  let a_42 = "a"
  let a_43 = "a"
  let a_44 = "a"
  let a_45 = "a"
  let a_46 = "a"
  let a_47 = "a"
  let a_48 = "a"
  let a_49 = "a"
  let a_50 = "a"
  let a_51 = "a"
  let a_52 = "a"
  let a_53 = "a"
  let a_54 = "a"
  let a_55 = "a"
  let a_56 = "a"
  let a_57 = "a"
  let a_58 = "a"
  let a_59 = "a"
  let a_60 = "a"
  let a_61 = "a"
  let a_62 = "a"
  let a_63 = "a"
  let a_64 = "a"
  let a_65 = "a"
  let a_66 = "a"
  let a_67 = "a"
  let a_68 = "a"
  let a_69 = "a"
  let a_70 = "a"
  let a_71 = "a"
  let a_72 = "a"
  let a_73 = "a"
  let a_74 = "a"
  let a_75 = "a"
  let a_76 = "a"
  let a_77 = "a"
  let a_78 = "a"
  let a_79 = "a"
  let a_80 = "a"
  let a_81 = "a"
  let a_82 = "a"
  let a_83 = "a"
  let a_84 = "a"
  let a_85 = "a"
  let a_86 = "a"
  let a_87 = "a"
  let a_88 = "a"
  let a_89 = "a"
  let a_90 = "a"
  let a_91 = "a"
  let a_92 = "a"
  let a_93 = "a"
  let a_94 = "a"
  let a_95 = "a"
  let a_96 = "a"
  let a_97 = "a"
  let a_98 = "a"
  let a_99 = "a"
  let a_100 = "a"
  let a_101 = "a"
  let a_102 = "a"
  let a_103 = "a"
  let a_104 = "a"
  let a_105 = "a"
  let a_106 = "a"
  let a_107 = "a"
  let a_108 = "a"
  let a_109 = "a"
  let a_110 = "a"
  let a_111 = "a"
  let a_112 = "a"
  let a_113 = "a"
  let a_114 = "a"
  let a_115 = "a"
  let a_116 = "a"
  let a_117 = "a"
  let a_118 = "a"
  let a_119 = "a"
  let a_120 = "a"
  let a_121 = "a"
  let a_122 = "a"
  let a_123 = "a"
  let a_124 = "a"
  let a_125 = "a"
  let a_126 = "a"
  let a_127 = "a"
  let a_128 = "a"
  let a_129 = "a"
  let a_130 = "a"
  let a_131 = "a"
  let a_132 = "a"
  let a_133 = "a"
  let a_134 = "a"
  let a_135 = "a"
  let a_136 = "a"
  let a_137 = "a"
  let a_138 = "a"
  let a_139 = "a"
  let a_140 = "a"
  let a_141 = "a"
  let a_142 = "a"
  let a_143 = "a"
  let a_144 = "a"
  let a_145 = "a"
  let a_146 = "a"
  let a_147 = "a"
  let a_148 = "a"
  let a_149 = "a"
  let a_150 = "a"
  let a_151 = "a"
  let a_152 = "a"
  let a_153 = "a"
  let a_154 = "a"
  let a_155 = "a"
  let a_156 = "a"
  let a_157 = "a"
  let a_158 = "a"
  let a_159 = "a"
  let a_160 = "a"
  let a_161 = "a"
  let a_162 = "a"
  let a_163 = "a"
  let a_164 = "a"
  let a_165 = "a"
  let a_166 = "a"
  let a_167 = "a"
  let a_168 = "a"
  let a_169 = "a"
  let a_170 = "a"
  let a_171 = "a"
  let a_172 = "a"
  let a_173 = "a"
  let a_174 = "a"
  let a_175 = "a"
  let a_176 = "a"
  let a_177 = "a"
  let a_178 = "a"
  let a_179 = "a"
  let a_180 = "a"
  let a_181 = "a"
  let a_182 = "a"
  let a_183 = "a"
  let a_184 = "a"
  let a_185 = "a"
  let a_186 = "a"
  let a_187 = "a"
  let a_188 = "a"
  let a_189 = "a"
  let a_190 = "a"
  let a_191 = "a"
  let a_192 = "a"
  let a_193 = "a"
  let a_194 = "a"
  let a_195 = "a"
  let a_196 = "a"
  let a_197 = "a"
  let a_198 = "a"
  let a_199 = "a"
  let a_200 = "a"
  let a_201 = "a"
  let a_202 = "a"
  let a_203 = "a"
  let a_204 = "a"
  let a_205 = "a"
  let a_206 = "a"
  let a_207 = "a"
  let a_208 = "a"
  let a_209 = "a"
  let a_210 = "a"
  let a_211 = "a"
  let a_212 = "a"
  let a_213 = "a"
  let a_214 = "a"
  let a_215 = "a"
  let a_216 = "a"
  let a_217 = "a"
  let a_218 = "a"
  let a_219 = "a"
  let a_220 = "a"
  let a_221 = "a"
  let a_222 = "a"
  let a_223 = "a"
  let a_224 = "a"
  let a_225 = "a"
  let a_226 = "a"
  let a_227 = "a"
  let a_228 = "a"
  let a_229 = "a"
  let a_230 = "a"
  let a_231 = "a"
  let a_232 = "a"
  let a_233 = "a"
  let a_234 = "a"
  let a_235 = "a"
  let a_236 = "a"
  let a_237 = "a"
  let a_238 = "a"
  let a_239 = "a"
  let a_240 = "a"
  let a_241 = "a"
  let a_242 = "a"
  let a_243 = "a"
  let a_244 = "a"
  let a_245 = "a"
  let a_246 = "a"
  let a_247 = "a"
  let a_248 = "a"
  let a_249 = "a"
  let a_250 = "a"
  let a_251 = "a"
  let a_252 = "a"
  let a_253 = "a"
  let a_254 = "a"
  let a_255 = "a"
  let a_256 = "a"
  let a_257 = "a"
  let a_258 = "a"
  let a_259 = "a"
  let a_260 = "a"
  let a_261 = "a"
  let a_262 = "a"
  let a_263 = "a"
  let a_264 = "a"
  let a_265 = "a"
  let a_266 = "a"
end
[%%expect{|
Lines 265-534, characters 6-3:
265 | ......struct
266 |   let f_0 = #42.0
267 |   let a_0 = "a"
268 |   let a_1 = "a"
269 |   let a_2 = "a"
...
531 |   let a_264 = "a"
532 |   let a_265 = "a"
533 |   let a_266 = "a"
534 | end
Error: Mixed modules may contain at most 254 value fields prior to the flat suffix, but this one contains 261.
|}]


module Big_module_with_small_coercion : sig
  (* Will compile since the struct is coerced into having a small enough
     scannable prefix *)
  val f_0 : float#
  val a_0 : string
  val a_1 : string
  val a_2 : string
end = struct
  let f_0 = #42.0
  let a_0 = "a"
  let a_1 = "a"
  let a_2 = "a"
  let a_3 = "a"
  let a_4 = "a"
  let a_5 = "a"
  let a_6 = "a"
  let a_7 = "a"
  let a_8 = "a"
  let a_9 = "a"
  let a_10 = "a"
  let a_11 = "a"
  let a_12 = "a"
  let a_13 = "a"
  let a_14 = "a"
  let a_15 = "a"
  let a_16 = "a"
  let a_17 = "a"
  let a_18 = "a"
  let a_19 = "a"
  let a_20 = "a"
  let a_21 = "a"
  let a_22 = "a"
  let a_23 = "a"
  let a_24 = "a"
  let a_25 = "a"
  let a_26 = "a"
  let a_27 = "a"
  let a_28 = "a"
  let a_29 = "a"
  let a_30 = "a"
  let a_31 = "a"
  let a_32 = "a"
  let a_33 = "a"
  let a_34 = "a"
  let a_35 = "a"
  let a_36 = "a"
  let a_37 = "a"
  let a_38 = "a"
  let a_39 = "a"
  let a_40 = "a"
  let a_41 = "a"
  let a_42 = "a"
  let a_43 = "a"
  let a_44 = "a"
  let a_45 = "a"
  let a_46 = "a"
  let a_47 = "a"
  let a_48 = "a"
  let a_49 = "a"
  let a_50 = "a"
  let a_51 = "a"
  let a_52 = "a"
  let a_53 = "a"
  let a_54 = "a"
  let a_55 = "a"
  let a_56 = "a"
  let a_57 = "a"
  let a_58 = "a"
  let a_59 = "a"
  let a_60 = "a"
  let a_61 = "a"
  let a_62 = "a"
  let a_63 = "a"
  let a_64 = "a"
  let a_65 = "a"
  let a_66 = "a"
  let a_67 = "a"
  let a_68 = "a"
  let a_69 = "a"
  let a_70 = "a"
  let a_71 = "a"
  let a_72 = "a"
  let a_73 = "a"
  let a_74 = "a"
  let a_75 = "a"
  let a_76 = "a"
  let a_77 = "a"
  let a_78 = "a"
  let a_79 = "a"
  let a_80 = "a"
  let a_81 = "a"
  let a_82 = "a"
  let a_83 = "a"
  let a_84 = "a"
  let a_85 = "a"
  let a_86 = "a"
  let a_87 = "a"
  let a_88 = "a"
  let a_89 = "a"
  let a_90 = "a"
  let a_91 = "a"
  let a_92 = "a"
  let a_93 = "a"
  let a_94 = "a"
  let a_95 = "a"
  let a_96 = "a"
  let a_97 = "a"
  let a_98 = "a"
  let a_99 = "a"
  let a_100 = "a"
  let a_101 = "a"
  let a_102 = "a"
  let a_103 = "a"
  let a_104 = "a"
  let a_105 = "a"
  let a_106 = "a"
  let a_107 = "a"
  let a_108 = "a"
  let a_109 = "a"
  let a_110 = "a"
  let a_111 = "a"
  let a_112 = "a"
  let a_113 = "a"
  let a_114 = "a"
  let a_115 = "a"
  let a_116 = "a"
  let a_117 = "a"
  let a_118 = "a"
  let a_119 = "a"
  let a_120 = "a"
  let a_121 = "a"
  let a_122 = "a"
  let a_123 = "a"
  let a_124 = "a"
  let a_125 = "a"
  let a_126 = "a"
  let a_127 = "a"
  let a_128 = "a"
  let a_129 = "a"
  let a_130 = "a"
  let a_131 = "a"
  let a_132 = "a"
  let a_133 = "a"
  let a_134 = "a"
  let a_135 = "a"
  let a_136 = "a"
  let a_137 = "a"
  let a_138 = "a"
  let a_139 = "a"
  let a_140 = "a"
  let a_141 = "a"
  let a_142 = "a"
  let a_143 = "a"
  let a_144 = "a"
  let a_145 = "a"
  let a_146 = "a"
  let a_147 = "a"
  let a_148 = "a"
  let a_149 = "a"
  let a_150 = "a"
  let a_151 = "a"
  let a_152 = "a"
  let a_153 = "a"
  let a_154 = "a"
  let a_155 = "a"
  let a_156 = "a"
  let a_157 = "a"
  let a_158 = "a"
  let a_159 = "a"
  let a_160 = "a"
  let a_161 = "a"
  let a_162 = "a"
  let a_163 = "a"
  let a_164 = "a"
  let a_165 = "a"
  let a_166 = "a"
  let a_167 = "a"
  let a_168 = "a"
  let a_169 = "a"
  let a_170 = "a"
  let a_171 = "a"
  let a_172 = "a"
  let a_173 = "a"
  let a_174 = "a"
  let a_175 = "a"
  let a_176 = "a"
  let a_177 = "a"
  let a_178 = "a"
  let a_179 = "a"
  let a_180 = "a"
  let a_181 = "a"
  let a_182 = "a"
  let a_183 = "a"
  let a_184 = "a"
  let a_185 = "a"
  let a_186 = "a"
  let a_187 = "a"
  let a_188 = "a"
  let a_189 = "a"
  let a_190 = "a"
  let a_191 = "a"
  let a_192 = "a"
  let a_193 = "a"
  let a_194 = "a"
  let a_195 = "a"
  let a_196 = "a"
  let a_197 = "a"
  let a_198 = "a"
  let a_199 = "a"
  let a_200 = "a"
  let a_201 = "a"
  let a_202 = "a"
  let a_203 = "a"
  let a_204 = "a"
  let a_205 = "a"
  let a_206 = "a"
  let a_207 = "a"
  let a_208 = "a"
  let a_209 = "a"
  let a_210 = "a"
  let a_211 = "a"
  let a_212 = "a"
  let a_213 = "a"
  let a_214 = "a"
  let a_215 = "a"
  let a_216 = "a"
  let a_217 = "a"
  let a_218 = "a"
  let a_219 = "a"
  let a_220 = "a"
  let a_221 = "a"
  let a_222 = "a"
  let a_223 = "a"
  let a_224 = "a"
  let a_225 = "a"
  let a_226 = "a"
  let a_227 = "a"
  let a_228 = "a"
  let a_229 = "a"
  let a_230 = "a"
  let a_231 = "a"
  let a_232 = "a"
  let a_233 = "a"
  let a_234 = "a"
  let a_235 = "a"
  let a_236 = "a"
  let a_237 = "a"
  let a_238 = "a"
  let a_239 = "a"
  let a_240 = "a"
  let a_241 = "a"
  let a_242 = "a"
  let a_243 = "a"
  let a_244 = "a"
  let a_245 = "a"
  let a_246 = "a"
  let a_247 = "a"
  let a_248 = "a"
  let a_249 = "a"
  let a_250 = "a"
  let a_251 = "a"
  let a_252 = "a"
  let a_253 = "a"
  let a_254 = "a"
  let a_255 = "a"
  let a_256 = "a"
  let a_257 = "a"
  let a_258 = "a"
  let a_259 = "a"
  let a_260 = "a"
  let a_261 = "a"
  let a_262 = "a"
  let a_263 = "a"
  let a_264 = "a"
  let a_265 = "a"
  let a_266 = "a"
end
[%%expect{|
module Big_module_with_small_coercion :
  sig val f_0 : float# val a_0 : string val a_1 : string val a_2 : string end
|}]


module Big_include = struct
  (* Won't compile because the scannable prefix is too big after the include *)
  module To_be_included = struct
    let a_248 = "a"
    let a_249 = "a"
    let a_250 = "a"
    let a_251 = "a"
    let a_252 = "a"
    let a_253 = "a"
    let a_254 = "a"
    let a_255 = "a"
    let a_256 = "a"
  end
  include To_be_included
  let f_0 = #42.0
  let a_0 = "a"
  let a_1 = "a"
  let a_2 = "a"
  let a_3 = "a"
  let a_4 = "a"
  let a_5 = "a"
  let a_6 = "a"
  let a_7 = "a"
  let a_8 = "a"
  let a_9 = "a"
  let a_10 = "a"
  let a_11 = "a"
  let a_12 = "a"
  let a_13 = "a"
  let a_14 = "a"
  let a_15 = "a"
  let a_16 = "a"
  let a_17 = "a"
  let a_18 = "a"
  let a_19 = "a"
  let a_20 = "a"
  let a_21 = "a"
  let a_22 = "a"
  let a_23 = "a"
  let a_24 = "a"
  let a_25 = "a"
  let a_26 = "a"
  let a_27 = "a"
  let a_28 = "a"
  let a_29 = "a"
  let a_30 = "a"
  let a_31 = "a"
  let a_32 = "a"
  let a_33 = "a"
  let a_34 = "a"
  let a_35 = "a"
  let a_36 = "a"
  let a_37 = "a"
  let a_38 = "a"
  let a_39 = "a"
  let a_40 = "a"
  let a_41 = "a"
  let a_42 = "a"
  let a_43 = "a"
  let a_44 = "a"
  let a_45 = "a"
  let a_46 = "a"
  let a_47 = "a"
  let a_48 = "a"
  let a_49 = "a"
  let a_50 = "a"
  let a_51 = "a"
  let a_52 = "a"
  let a_53 = "a"
  let a_54 = "a"
  let a_55 = "a"
  let a_56 = "a"
  let a_57 = "a"
  let a_58 = "a"
  let a_59 = "a"
  let a_60 = "a"
  let a_61 = "a"
  let a_62 = "a"
  let a_63 = "a"
  let a_64 = "a"
  let a_65 = "a"
  let a_66 = "a"
  let a_67 = "a"
  let a_68 = "a"
  let a_69 = "a"
  let a_70 = "a"
  let a_71 = "a"
  let a_72 = "a"
  let a_73 = "a"
  let a_74 = "a"
  let a_75 = "a"
  let a_76 = "a"
  let a_77 = "a"
  let a_78 = "a"
  let a_79 = "a"
  let a_80 = "a"
  let a_81 = "a"
  let a_82 = "a"
  let a_83 = "a"
  let a_84 = "a"
  let a_85 = "a"
  let a_86 = "a"
  let a_87 = "a"
  let a_88 = "a"
  let a_89 = "a"
  let a_90 = "a"
  let a_91 = "a"
  let a_92 = "a"
  let a_93 = "a"
  let a_94 = "a"
  let a_95 = "a"
  let a_96 = "a"
  let a_97 = "a"
  let a_98 = "a"
  let a_99 = "a"
  let a_100 = "a"
  let a_101 = "a"
  let a_102 = "a"
  let a_103 = "a"
  let a_104 = "a"
  let a_105 = "a"
  let a_106 = "a"
  let a_107 = "a"
  let a_108 = "a"
  let a_109 = "a"
  let a_110 = "a"
  let a_111 = "a"
  let a_112 = "a"
  let a_113 = "a"
  let a_114 = "a"
  let a_115 = "a"
  let a_116 = "a"
  let a_117 = "a"
  let a_118 = "a"
  let a_119 = "a"
  let a_120 = "a"
  let a_121 = "a"
  let a_122 = "a"
  let a_123 = "a"
  let a_124 = "a"
  let a_125 = "a"
  let a_126 = "a"
  let a_127 = "a"
  let a_128 = "a"
  let a_129 = "a"
  let a_130 = "a"
  let a_131 = "a"
  let a_132 = "a"
  let a_133 = "a"
  let a_134 = "a"
  let a_135 = "a"
  let a_136 = "a"
  let a_137 = "a"
  let a_138 = "a"
  let a_139 = "a"
  let a_140 = "a"
  let a_141 = "a"
  let a_142 = "a"
  let a_143 = "a"
  let a_144 = "a"
  let a_145 = "a"
  let a_146 = "a"
  let a_147 = "a"
  let a_148 = "a"
  let a_149 = "a"
  let a_150 = "a"
  let a_151 = "a"
  let a_152 = "a"
  let a_153 = "a"
  let a_154 = "a"
  let a_155 = "a"
  let a_156 = "a"
  let a_157 = "a"
  let a_158 = "a"
  let a_159 = "a"
  let a_160 = "a"
  let a_161 = "a"
  let a_162 = "a"
  let a_163 = "a"
  let a_164 = "a"
  let a_165 = "a"
  let a_166 = "a"
  let a_167 = "a"
  let a_168 = "a"
  let a_169 = "a"
  let a_170 = "a"
  let a_171 = "a"
  let a_172 = "a"
  let a_173 = "a"
  let a_174 = "a"
  let a_175 = "a"
  let a_176 = "a"
  let a_177 = "a"
  let a_178 = "a"
  let a_179 = "a"
  let a_180 = "a"
  let a_181 = "a"
  let a_182 = "a"
  let a_183 = "a"
  let a_184 = "a"
  let a_185 = "a"
  let a_186 = "a"
  let a_187 = "a"
  let a_188 = "a"
  let a_189 = "a"
  let a_190 = "a"
  let a_191 = "a"
  let a_192 = "a"
  let a_193 = "a"
  let a_194 = "a"
  let a_195 = "a"
  let a_196 = "a"
  let a_197 = "a"
  let a_198 = "a"
  let a_199 = "a"
  let a_200 = "a"
  let a_201 = "a"
  let a_202 = "a"
  let a_203 = "a"
  let a_204 = "a"
  let a_205 = "a"
  let a_206 = "a"
  let a_207 = "a"
  let a_208 = "a"
  let a_209 = "a"
  let a_210 = "a"
  let a_211 = "a"
  let a_212 = "a"
  let a_213 = "a"
  let a_214 = "a"
  let a_215 = "a"
  let a_216 = "a"
  let a_217 = "a"
  let a_218 = "a"
  let a_219 = "a"
  let a_220 = "a"
  let a_221 = "a"
  let a_222 = "a"
  let a_223 = "a"
  let a_224 = "a"
  let a_225 = "a"
  let a_226 = "a"
  let a_227 = "a"
  let a_228 = "a"
  let a_229 = "a"
  let a_230 = "a"
  let a_231 = "a"
  let a_232 = "a"
  let a_233 = "a"
  let a_234 = "a"
  let a_235 = "a"
  let a_236 = "a"
  let a_237 = "a"
  let a_238 = "a"
  let a_239 = "a"
  let a_240 = "a"
  let a_241 = "a"
  let a_242 = "a"
  let a_243 = "a"
  let a_244 = "a"
  let a_245 = "a"
  let a_246 = "a"
  let a_247 = "a"
end
[%%expect{|
Lines 1-264, characters 21-3:
  1 | .....................struct
  2 |   (* Won't compile because the scannable prefix is too big after the include *)
  3 |   module To_be_included = struct
  4 |     let a_248 = "a"
  5 |     let a_249 = "a"
...
261 |   let a_245 = "a"
262 |   let a_246 = "a"
263 |   let a_247 = "a"
264 | end
Error: Mixed modules may contain at most 254 value fields prior to the flat suffix, but this one contains 258.
|}]

module type Big_module_type = sig
  (* Does not follow the scannable prefix restriction, but we still allow it
     since it is a signature. *)
  val f_0 : float#
  val a_0 : string
  val a_1 : string
  val a_2 : string
  val a_3 : string
  val a_4 : string
  val a_5 : string
  val a_6 : string
  val a_7 : string
  val a_8 : string
  val a_9 : string
  val a_10 : string
  val a_11 : string
  val a_12 : string
  val a_13 : string
  val a_14 : string
  val a_15 : string
  val a_16 : string
  val a_17 : string
  val a_18 : string
  val a_19 : string
  val a_20 : string
  val a_21 : string
  val a_22 : string
  val a_23 : string
  val a_24 : string
  val a_25 : string
  val a_26 : string
  val a_27 : string
  val a_28 : string
  val a_29 : string
  val a_30 : string
  val a_31 : string
  val a_32 : string
  val a_33 : string
  val a_34 : string
  val a_35 : string
  val a_36 : string
  val a_37 : string
  val a_38 : string
  val a_39 : string
  val a_40 : string
  val a_41 : string
  val a_42 : string
  val a_43 : string
  val a_44 : string
  val a_45 : string
  val a_46 : string
  val a_47 : string
  val a_48 : string
  val a_49 : string
  val a_50 : string
  val a_51 : string
  val a_52 : string
  val a_53 : string
  val a_54 : string
  val a_55 : string
  val a_56 : string
  val a_57 : string
  val a_58 : string
  val a_59 : string
  val a_60 : string
  val a_61 : string
  val a_62 : string
  val a_63 : string
  val a_64 : string
  val a_65 : string
  val a_66 : string
  val a_67 : string
  val a_68 : string
  val a_69 : string
  val a_70 : string
  val a_71 : string
  val a_72 : string
  val a_73 : string
  val a_74 : string
  val a_75 : string
  val a_76 : string
  val a_77 : string
  val a_78 : string
  val a_79 : string
  val a_80 : string
  val a_81 : string
  val a_82 : string
  val a_83 : string
  val a_84 : string
  val a_85 : string
  val a_86 : string
  val a_87 : string
  val a_88 : string
  val a_89 : string
  val a_90 : string
  val a_91 : string
  val a_92 : string
  val a_93 : string
  val a_94 : string
  val a_95 : string
  val a_96 : string
  val a_97 : string
  val a_98 : string
  val a_99 : string
  val a_100 : string
  val a_101 : string
  val a_102 : string
  val a_103 : string
  val a_104 : string
  val a_105 : string
  val a_106 : string
  val a_107 : string
  val a_108 : string
  val a_109 : string
  val a_110 : string
  val a_111 : string
  val a_112 : string
  val a_113 : string
  val a_114 : string
  val a_115 : string
  val a_116 : string
  val a_117 : string
  val a_118 : string
  val a_119 : string
  val a_120 : string
  val a_121 : string
  val a_122 : string
  val a_123 : string
  val a_124 : string
  val a_125 : string
  val a_126 : string
  val a_127 : string
  val a_128 : string
  val a_129 : string
  val a_130 : string
  val a_131 : string
  val a_132 : string
  val a_133 : string
  val a_134 : string
  val a_135 : string
  val a_136 : string
  val a_137 : string
  val a_138 : string
  val a_139 : string
  val a_140 : string
  val a_141 : string
  val a_142 : string
  val a_143 : string
  val a_144 : string
  val a_145 : string
  val a_146 : string
  val a_147 : string
  val a_148 : string
  val a_149 : string
  val a_150 : string
  val a_151 : string
  val a_152 : string
  val a_153 : string
  val a_154 : string
  val a_155 : string
  val a_156 : string
  val a_157 : string
  val a_158 : string
  val a_159 : string
  val a_160 : string
  val a_161 : string
  val a_162 : string
  val a_163 : string
  val a_164 : string
  val a_165 : string
  val a_166 : string
  val a_167 : string
  val a_168 : string
  val a_169 : string
  val a_170 : string
  val a_171 : string
  val a_172 : string
  val a_173 : string
  val a_174 : string
  val a_175 : string
  val a_176 : string
  val a_177 : string
  val a_178 : string
  val a_179 : string
  val a_180 : string
  val a_181 : string
  val a_182 : string
  val a_183 : string
  val a_184 : string
  val a_185 : string
  val a_186 : string
  val a_187 : string
  val a_188 : string
  val a_189 : string
  val a_190 : string
  val a_191 : string
  val a_192 : string
  val a_193 : string
  val a_194 : string
  val a_195 : string
  val a_196 : string
  val a_197 : string
  val a_198 : string
  val a_199 : string
  val a_200 : string
  val a_201 : string
  val a_202 : string
  val a_203 : string
  val a_204 : string
  val a_205 : string
  val a_206 : string
  val a_207 : string
  val a_208 : string
  val a_209 : string
  val a_210 : string
  val a_211 : string
  val a_212 : string
  val a_213 : string
  val a_214 : string
  val a_215 : string
  val a_216 : string
  val a_217 : string
  val a_218 : string
  val a_219 : string
  val a_220 : string
  val a_221 : string
  val a_222 : string
  val a_223 : string
  val a_224 : string
  val a_225 : string
  val a_226 : string
  val a_227 : string
  val a_228 : string
  val a_229 : string
  val a_230 : string
  val a_231 : string
  val a_232 : string
  val a_233 : string
  val a_234 : string
  val a_235 : string
  val a_236 : string
  val a_237 : string
  val a_238 : string
  val a_239 : string
  val a_240 : string
  val a_241 : string
  val a_242 : string
  val a_243 : string
  val a_244 : string
  val a_245 : string
  val a_246 : string
  val a_247 : string
  val a_248 : string
  val a_249 : string
  val a_250 : string
  val a_251 : string
  val a_252 : string
  val a_253 : string
  val a_254 : string
  val a_255 : string
  val a_256 : string
  val a_257 : string
end
[%%expect{|
module type Big_module_type =
  sig
    val f_0 : float#
    val a_0 : string
    val a_1 : string
    val a_2 : string
    val a_3 : string
    val a_4 : string
    val a_5 : string
    val a_6 : string
    val a_7 : string
    val a_8 : string
    val a_9 : string
    val a_10 : string
    val a_11 : string
    val a_12 : string
    val a_13 : string
    val a_14 : string
    val a_15 : string
    val a_16 : string
    val a_17 : string
    val a_18 : string
    val a_19 : string
    val a_20 : string
    val a_21 : string
    val a_22 : string
    val a_23 : string
    val a_24 : string
    val a_25 : string
    val a_26 : string
    val a_27 : string
    val a_28 : string
    val a_29 : string
    val a_30 : string
    val a_31 : string
    val a_32 : string
    val a_33 : string
    val a_34 : string
    val a_35 : string
    val a_36 : string
    val a_37 : string
    val a_38 : string
    val a_39 : string
    val a_40 : string
    val a_41 : string
    val a_42 : string
    val a_43 : string
    val a_44 : string
    val a_45 : string
    val a_46 : string
    val a_47 : string
    val a_48 : string
    val a_49 : string
    val a_50 : string
    val a_51 : string
    val a_52 : string
    val a_53 : string
    val a_54 : string
    val a_55 : string
    val a_56 : string
    val a_57 : string
    val a_58 : string
    val a_59 : string
    val a_60 : string
    val a_61 : string
    val a_62 : string
    val a_63 : string
    val a_64 : string
    val a_65 : string
    val a_66 : string
    val a_67 : string
    val a_68 : string
    val a_69 : string
    val a_70 : string
    val a_71 : string
    val a_72 : string
    val a_73 : string
    val a_74 : string
    val a_75 : string
    val a_76 : string
    val a_77 : string
    val a_78 : string
    val a_79 : string
    val a_80 : string
    val a_81 : string
    val a_82 : string
    val a_83 : string
    val a_84 : string
    val a_85 : string
    val a_86 : string
    val a_87 : string
    val a_88 : string
    val a_89 : string
    val a_90 : string
    val a_91 : string
    val a_92 : string
    val a_93 : string
    val a_94 : string
    val a_95 : string
    val a_96 : string
    val a_97 : string
    val a_98 : string
    val a_99 : string
    val a_100 : string
    val a_101 : string
    val a_102 : string
    val a_103 : string
    val a_104 : string
    val a_105 : string
    val a_106 : string
    val a_107 : string
    val a_108 : string
    val a_109 : string
    val a_110 : string
    val a_111 : string
    val a_112 : string
    val a_113 : string
    val a_114 : string
    val a_115 : string
    val a_116 : string
    val a_117 : string
    val a_118 : string
    val a_119 : string
    val a_120 : string
    val a_121 : string
    val a_122 : string
    val a_123 : string
    val a_124 : string
    val a_125 : string
    val a_126 : string
    val a_127 : string
    val a_128 : string
    val a_129 : string
    val a_130 : string
    val a_131 : string
    val a_132 : string
    val a_133 : string
    val a_134 : string
    val a_135 : string
    val a_136 : string
    val a_137 : string
    val a_138 : string
    val a_139 : string
    val a_140 : string
    val a_141 : string
    val a_142 : string
    val a_143 : string
    val a_144 : string
    val a_145 : string
    val a_146 : string
    val a_147 : string
    val a_148 : string
    val a_149 : string
    val a_150 : string
    val a_151 : string
    val a_152 : string
    val a_153 : string
    val a_154 : string
    val a_155 : string
    val a_156 : string
    val a_157 : string
    val a_158 : string
    val a_159 : string
    val a_160 : string
    val a_161 : string
    val a_162 : string
    val a_163 : string
    val a_164 : string
    val a_165 : string
    val a_166 : string
    val a_167 : string
    val a_168 : string
    val a_169 : string
    val a_170 : string
    val a_171 : string
    val a_172 : string
    val a_173 : string
    val a_174 : string
    val a_175 : string
    val a_176 : string
    val a_177 : string
    val a_178 : string
    val a_179 : string
    val a_180 : string
    val a_181 : string
    val a_182 : string
    val a_183 : string
    val a_184 : string
    val a_185 : string
    val a_186 : string
    val a_187 : string
    val a_188 : string
    val a_189 : string
    val a_190 : string
    val a_191 : string
    val a_192 : string
    val a_193 : string
    val a_194 : string
    val a_195 : string
    val a_196 : string
    val a_197 : string
    val a_198 : string
    val a_199 : string
    val a_200 : string
    val a_201 : string
    val a_202 : string
    val a_203 : string
    val a_204 : string
    val a_205 : string
    val a_206 : string
    val a_207 : string
    val a_208 : string
    val a_209 : string
    val a_210 : string
    val a_211 : string
    val a_212 : string
    val a_213 : string
    val a_214 : string
    val a_215 : string
    val a_216 : string
    val a_217 : string
    val a_218 : string
    val a_219 : string
    val a_220 : string
    val a_221 : string
    val a_222 : string
    val a_223 : string
    val a_224 : string
    val a_225 : string
    val a_226 : string
    val a_227 : string
    val a_228 : string
    val a_229 : string
    val a_230 : string
    val a_231 : string
    val a_232 : string
    val a_233 : string
    val a_234 : string
    val a_235 : string
    val a_236 : string
    val a_237 : string
    val a_238 : string
    val a_239 : string
    val a_240 : string
    val a_241 : string
    val a_242 : string
    val a_243 : string
    val a_244 : string
    val a_245 : string
    val a_246 : string
    val a_247 : string
    val a_248 : string
    val a_249 : string
    val a_250 : string
    val a_251 : string
    val a_252 : string
    val a_253 : string
    val a_254 : string
    val a_255 : string
    val a_256 : string
    val a_257 : string
  end
|}]
